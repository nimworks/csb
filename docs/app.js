function Input({title:e,val:t,onChange:a,type:l,icon:n,err:r,initFocused:c}){let i=React.useRef();return React.useEffect(()=>{c&&i.current.focus()},[]),React.createElement("div",{className:"inpC"+(r&&""!==r.trim()?" inpErr":"")+(n&&""!==n.trim()?" inpHasIco":""),"data-title":e,"data-err":r},n&&""!==n.trim()&&React.createElement("i",{className:"icon-"+n}),React.createElement("input",{ref:i,className:"inp",tabIndex:"0",name:e.replace(/ /g,""),type:l||"text",placeholder:e,value:t,onChange:a}))}function Chk({children:e,isSelected:t,onClick:a}){return React.createElement("div",{className:"chk"+(t?" chkY":""),onClick:a},React.createElement("span",null),React.createElement("span",null,e))}function StarRatingBar({starRating:e,setStarRating:t}){return React.createElement("ul",{className:"starRatingBar"},React.createElement("li",{className:5==e?"starRated":"",onClick(){t(5)}}),React.createElement("li",{className:4==e?"starRated":"",onClick(){t(4)}}),React.createElement("li",{className:3==e?"starRated":"",onClick(){t(3)}}),React.createElement("li",{className:2==e?"starRated":"",onClick(){t(2)}}),React.createElement("li",{className:1==e?"starRated":"",onClick(){t(1)}}))}function StepsProgressBar({currentStep:e}){return React.createElement("ul",{className:"stepsProgressBar"},React.createElement("li",{className:7==e?"activeStep":"","data-step":"7"}),React.createElement("li",{className:6==e?"activeStep":"","data-step":"6"}),React.createElement("li",{className:5==e?"activeStep":"","data-step":"5"}),React.createElement("li",{className:4==e?"activeStep":"","data-step":"4"}),React.createElement("li",{className:3==e?"activeStep":"","data-step":"3"}),React.createElement("li",{className:2==e?"activeStep":"","data-step":"2"}),React.createElement("li",{className:1==e?"activeStep":"","data-step":"1"}))}function ProfileInfo({name:e,setName:t,nameErr:a,dob:l,setDob:n,dobErr:r}){return React.createElement("ul",{className:"dataUl"},React.createElement("li",null,React.createElement("h3",null,"Feeling Lucky already?"))," ",React.createElement("li",null,React.createElement(Input,{title:"Name",val:e,onChange(e){t(e.target.value)},err:a,icon:"user",initFocused:!0})),React.createElement("li",null,React.createElement(Input,{type:"date",val:l,title:"Date of Birth",onChange(e){n(e.target.value)},err:r,icon:"calendar"})))}function ContactDetails({name:e,email:t,setEmail:a,phn:l,setPhn:n,emailErr:r,phnErr:c}){return React.createElement("ul",{className:"dataUl"},React.createElement("li",null,React.createElement("h3",null,"Your contact info?"),React.createElement("span",null,"Hey ",React.createElement("span",{className:"capName"},e),", we shall reach out to you on below given details once results are declared!")),React.createElement("li",null,React.createElement(Input,{title:"Email",val:t,onChange(e){a(e.target.value)},err:r,icon:"",initFocused:!0})),React.createElement("li",null,React.createElement(Input,{title:"Phone",val:l,onChange(e){n(e.target.value)},err:c,icon:"",type:"number"})))}function FavDelicacy({favDelicacy:e,setFavDelicacy:t,favDelicacyErr:a}){return React.createElement("ul",{className:"dataUl"},React.createElement("li",null,React.createElement("h3",null,"Your favourite delicacy at CSB?"),React.createElement("span",null,"We'd love to hear what you love the most at CSB!")),React.createElement("li",null,React.createElement(Input,{title:"Your Favourite Delicacy",val:e,onChange(e){t(e.target.value)},err:a,icon:"",initFocused:!0})))}function VisitFreqSelection({visitFreqChoice:e,setVisitFreqChoice:t}){return React.createElement("ul",{className:"dataUl"},React.createElement("li",null,React.createElement("h3",null,"How frequently do you visit CSB, Kandivali?")),React.createElement("li",null,React.createElement(Chk,{onClick(){t(1)},isSelected:1===e},"Daily")),React.createElement("li",null,React.createElement(Chk,{onClick(){t(2)},isSelected:2===e},"Once a week")),React.createElement("li",null,React.createElement(Chk,{onClick(){t(3)},isSelected:3===e},"Once a month")),React.createElement("li",null,React.createElement(Chk,{onClick(){t(4)},isSelected:4===e},"This is my first visit")))}function Feedback({name:e,feedback:t,setFeedback:a,feedbackErr:l,starRating:n,setStarRating:r}){return React.createElement("ul",{className:"dataUl"},React.createElement("li",null,React.createElement("h3",null,"Any words for our service?"),React.createElement("span",null,"Dear ",React.createElement("span",{className:"capName"},e),", we welcome any of your feedback / suggestions related to our service!")),React.createElement("li",null,React.createElement(Input,{title:"Feedback / Suggestion",val:t,onChange(e){a(e.target.value)},err:l,icon:"",initFocused:!0})),React.createElement("li",null,React.createElement("h3",null,"Rate your experience!"),React.createElement(StarRatingBar,{starRating:n,setStarRating:r})))}function LocSelection({locChoice:e,setLocChoice:t}){return React.createElement("ul",{className:"dataUl"},React.createElement("li",null,React.createElement("h3",null,"Your locality?"),React.createElement("span",null,"Help us serve you better right where you stay!")),React.createElement("li",null,React.createElement(Chk,{onClick(){t(1)},isSelected:1===e},"Mira Road - Bhyander")),React.createElement("li",null,React.createElement(Chk,{onClick(){t(2)},isSelected:2===e},"Dahisar - Kandivali")),React.createElement("li",null,React.createElement(Chk,{onClick(){t(3)},isSelected:3===e},"Malad - Andheri")),React.createElement("li",null,React.createElement(Chk,{onClick(){t(4)},isSelected:4===e},"Other")))}function HumanVerification({captchaToken:e,setCaptchaToken:t}){let a=React.useRef(),l=e=>{t(e)},n=()=>{t(null)};return React.useEffect(()=>{hcaptcha&&null==e&&hcaptcha.render(a.current,{widgetID:"hCapWid1",sitekey:"7d9534dc-a9fb-406a-bd4b-196c7c892e9b",callback:l,"expired-callback":n,"open-callback":n})},[e]),React.createElement("ul",{className:"dataUl"},React.createElement("li",null,React.createElement("h3",null,"We love to serve Humans!"),null==e?React.createElement("span",null,"Verify that you aren't some AI algorithm trying out it's luck!"):React.createElement("span",null,"Verified! Kindly proceed")),React.createElement("li",null,React.createElement("div",{ref:a})))}function SuccessNotice(){let e=new Date;return React.createElement("ul",{className:"dataUl"},React.createElement("li",null,React.createElement("h3",null,"Collect your Lucky-Draw coupon!"),React.createElement("span",null,"Show this screen at the CSB outlet counter to collect your coupon!")),React.createElement("li",null,React.createElement("div",{className:"successTime"},React.createElement("i",{className:"successTick icon-check"}),React.createElement("div",null,e.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})),React.createElement("div",null,e.getDate()+" "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]+" "+e.getFullYear()))))}const ToastNotifierContext=React.createContext(()=>{});function ToastNotifier({children:e}){let[t,a]=React.useState(!1),[l,n]=React.useState(""),[r,c]=React.useState(""),i=null,s=()=>{i&&clearTimeout(i),n(""),c("")},o=()=>{a(!1),i&&clearTimeout(i),i=setTimeout(s,300)},u=(e,t)=>{e&&"string"==typeof e&&""!=e.trim()&&(t&&"string"==typeof t||(t=""),["err","ok","success","alert","warn"].includes(t)||(t=""),i&&clearTimeout(i),i=setTimeout(o,7e3),a(!0),n(e),c(t))};return React.createElement(React.Fragment,null,React.createElement(ToastNotifierContext.Provider,{value:u},e),React.createElement("div",{className:"tNotice"+("ok"==r||"success"==r?" tnOk":"err"==r?" tnErr":"warn"==r?" tnWarn":"alert"==r?" tnAlert":"")+(t?" tnViz":""),onClick:o},l))}function App(){let[e,t]=React.useState(!1),[a,l]=React.useState(1),[n,r]=React.useState(""),[c,i]=React.useState(""),[s,o]=React.useState(""),[u,m]=React.useState(""),[E,d]=React.useState(""),[p,h]=React.useState(""),[f,v]=React.useState(""),[g,y]=React.useState(""),[S,k]=React.useState(0),[C,N]=React.useState(""),[b,_]=React.useState(""),[$,w]=React.useState(0),[F,R]=React.useState(""),[I,D]=React.useState(""),[P,T]=React.useState(0),[q,B]=React.useState(null),A=React.useContext(ToastNotifierContext),U=e=>e&&""!=e.trim()?e.trim().length<3?"Minimum 3 letters":e.trim().length>40?"Is too long":/[^a-zA-Z ]/.test(e)?"Only alphabets allowed":/^(?:[^\d\W\s_]{3,20})(?:[\s]{1}(?:[^\d\W\s_]{2,20})){0,1}$/.test(e)?null:"Req Format: Firstname Lastname":"Required",x=e=>{var t=U(e);m(t||""),o(e)},L=e=>e&&""!=e.trim()?/^\d{4}-\d{2}-\d{2}$/.test(e)?isNaN(new Date(e).getTime())?"Invalid date":null:"Invalid format":"Required",O=e=>{var t=L(e);h(t||""),d(e)},V=e=>e&&""!=e.trim()?e.length>60?"Is too long":/^[\w.@]+@+[\w.]+$/.test(e)?null:"Enter valid email":"Email required",H=e=>{var t=V(e);i(t||""),r(e)},M=e=>e&&""!=e.trim()?/^[0-9]{10}$/.test(e)?10!==e.trim().length?"Should be 10 digits long":null:"Enter valid 10 digit number":"Phone required",W=e=>{var t=M(e);y(t||""),v(e)},Y=e=>e.length>100?"Is too long":/[^a-zA-Z0-9,!. ]/.test(e)?"Invalid character":null,z=e=>{var t=Y(e);_(t||""),N(e)},K=e=>{var t=Y(e);D(t||""),R(e)},j=async()=>{if(a>=8)return!1;switch(a){case 1:let c=U(s),u=L(E);if(null!=c||null!=u)return c&&m(c),u&&h(u),A("Pleae provide required details","err"),!1;if(Date.now()-new Date(E).getTime()<31556926e4)return A("You need to be 10+ years old to enroll"),!1;l(2);break;case 2:let p=V(n),g=M(f);if(null!=p||null!=g)return p&&i(p),g&&y(g),A("Pleae provide Email & Phone","err"),!1;l(3);break;case 3:if(S<1||S>4)return A("Pleae mention your locality","err"),!1;l(4);break;case 4:let b=Y(C);if(null!=b)return _(b),!1;l(5);break;case 5:if($<1||$>4)return A("Pleae mention your visit frequency","err"),!1;l(6);break;case 6:let I=Y(F);if(null!=I)return D(I),!1;l(7);break;case 7:if(e)return!1;if(null==q)return A("Kindly solve captcha","err"),!1;let x={n:s,dob:Math.floor(new Date(E).getTime()/1e3),eml:n,phn:f,loc:S,vfq:$,cptcha:q};""!==C&&(x.fd=C),""!==F&&(x.fb=F),P>0&&(x.r=P);try{t(!0);let O=await fetch("https://4fmyfzkngdvbf3hqnxf54fwyiq0adwlo.lambda-url.ap-south-1.on.aws/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(x)}),H=await O.json();if(!H.status)throw Error();if("error"===H.status)throw Error(H.error||"Failed to Enroll, Please retry");if("success"!==H.status)throw Error();l(8),A("Kindly collect coupon from the counter!"),B(null),r(""),o(""),d(""),v(""),k(0),N(""),w(0),R(""),T(0)}catch(W){A(W.message||W.name||W.code||"Failed to Enroll, Please retry","err"),t(!1)}finally{t(!1)}}},J=()=>{a>1&&l(a-1)};return React.createElement(React.Fragment,null,a<8&&React.createElement(StepsProgressBar,{currentStep:a}),React.createElement("div",null,1==a&&React.createElement(ProfileInfo,{name:s,setName:x,nameErr:u,dob:E,setDob:O,dobErr:p}),2==a&&React.createElement(ContactDetails,{name:s,email:n,setEmail:H,phn:f,setPhn:W,emailErr:c,phnErr:g}),3==a&&React.createElement(LocSelection,{locChoice:S,setLocChoice:k}),4==a&&React.createElement(FavDelicacy,{favDelicacy:C,setFavDelicacy:z,favDelicacyErr:b}),5==a&&React.createElement(VisitFreqSelection,{visitFreqChoice:$,setVisitFreqChoice:w}),6==a&&React.createElement(Feedback,{name:s,feedback:F,setFeedback:K,feedbackErr:I,starRating:P,setStarRating:T}),7==a&&React.createElement(HumanVerification,{captchaToken:q,setCaptchaToken:B}),8==a&&React.createElement(SuccessNotice,null)),React.createElement("footer",null,React.createElement("div",{className:"btnCntnr"},a<8?React.createElement(React.Fragment,null,React.createElement("button",{className:"btn primary ico icoRight",onClick:j},React.createElement("i",{className:"icon-arrow-right"}),React.createElement("span",null,1==a?"ENROLL":7==a?"SUBMIT":"PROCEED")),a>1&&React.createElement("button",{className:"btn secondary ico",onClick:J},React.createElement("i",{className:"icon-arrow-left"}))):React.createElement("a",{href:"https://instagram.com/chaisuttabar_kandivali",className:"btn secondary",target:"_blank"},React.createElement("span",null,"Follow Us on Instagram"),React.createElement("div",{style:{fontSize:"0.625em",opacity:.75}},"@chaisuttabar_kandivali")))),e&&React.createElement("div",{className:"appWip"}))}const root=ReactDOM.createRoot(document.getElementById("reactAppRoot"));root.render(React.createElement(ToastNotifier,null,React.createElement(App,null)));