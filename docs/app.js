function Input({title:e,val:t,onChange:a,type:l,icon:n,err:r,initFocused:c}){let s=React.useRef();return React.useEffect(()=>{c&&s.current.focus()},[]),React.createElement("div",{className:"inpC"+(r&&""!==r.trim()?" inpErr":"")+(n&&""!==n.trim()?" inpHasIco":""),"data-title":e,"data-err":r},n&&""!==n.trim()&&React.createElement("i",{className:"icon-"+n}),React.createElement("input",{ref:s,className:"inp",tabIndex:"0",name:e.replace(/ /g,""),type:l||"text",placeholder:e,value:t,onChange:a}))}function Chk({children:e,isSelected:t,onClick:a}){return React.createElement("div",{className:"chk"+(t?" chkY":""),onClick:a},React.createElement("span",null),React.createElement("span",null,e))}function StarRatingBar({starRating:e,setStarRating:t}){return React.createElement("ul",{className:"starRatingBar"},React.createElement("li",{className:5==e?"starRated":"",onClick(){t(5)}}),React.createElement("li",{className:4==e?"starRated":"",onClick(){t(4)}}),React.createElement("li",{className:3==e?"starRated":"",onClick(){t(3)}}),React.createElement("li",{className:2==e?"starRated":"",onClick(){t(2)}}),React.createElement("li",{className:1==e?"starRated":"",onClick(){t(1)}}))}function StepsProgressBar({currentStep:e}){return React.createElement("ul",{className:"stepsProgressBar"},React.createElement("li",{className:5==e?"activeStep":"","data-step":"5"}),React.createElement("li",{className:4==e?"activeStep":"","data-step":"4"}),React.createElement("li",{className:3==e?"activeStep":"","data-step":"3"}),React.createElement("li",{className:2==e?"activeStep":"","data-step":"2"}),React.createElement("li",{className:1==e?"activeStep":"","data-step":"1"}))}function Name({name:e,setName:t,lastName:a,setLastName:l,nameErr:n,lastNameErr:r}){return React.createElement("ul",{className:"dataUl"},React.createElement("li",null,React.createElement("h3",null,"Feeling Lucky already?"))," ",React.createElement("li",null,React.createElement(Input,{title:"First Name",val:e,onChange(e){t(e.target.value)},err:n,icon:"",initFocused:!0})),React.createElement("li",null,React.createElement(Input,{title:"Last Name",val:a,onChange(e){l(e.target.value)},err:r,icon:""})))}function ContactDetails({name:e,email:t,setEmail:a,phn:l,setPhn:n,emailErr:r,phnErr:c}){return React.createElement("ul",{className:"dataUl"},React.createElement("li",null,React.createElement("h3",null,"Your contact info?"),React.createElement("span",null,"Hey ",React.createElement("span",{className:"capName"},e),", we shall reach out to you on below given details once results are declared!")),React.createElement("li",null,React.createElement(Input,{title:"Email",val:t,onChange(e){a(e.target.value)},err:r,icon:"",initFocused:!0})),React.createElement("li",null,React.createElement(Input,{title:"Phone",val:l,onChange(e){n(e.target.value)},err:c,icon:"",type:"number"})))}function Feedback({name:e,feedback:t,setFeedback:a,feedbackErr:l,starRating:n,setStarRating:r}){return React.createElement("ul",{className:"dataUl"},React.createElement("li",null,React.createElement("h3",null,"Any words for our service?"),React.createElement("span",null,"Dear ",React.createElement("span",{className:"capName"},e),", we welcome any of your feedback / suggestions related to our service!")),React.createElement("li",null,React.createElement(Input,{title:"Feedback / Suggestion",val:t,onChange(e){a(e.target.value)},err:l,icon:"",initFocused:!0})),React.createElement("li",null,React.createElement("h3",null,"Rate your experience!"),React.createElement(StarRatingBar,{starRating:n,setStarRating:r})))}function LocSelection({locChoice:e,setLocChoice:t}){return React.createElement("ul",{className:"dataUl"},React.createElement("li",null,React.createElement("h3",null,"Your locality?"),React.createElement("span",null,"Help us serve you better right where you stay!")),React.createElement("li",null,React.createElement(Chk,{onClick(){t(1)},isSelected:1===e},"Mira Road - Bhyander")),React.createElement("li",null,React.createElement(Chk,{onClick(){t(2)},isSelected:2===e},"Dahisar - Kandivali")),React.createElement("li",null,React.createElement(Chk,{onClick(){t(3)},isSelected:3===e},"Malad - Andheri")),React.createElement("li",null,React.createElement(Chk,{onClick(){t(4)},isSelected:4===e},"Other")))}function HumanVerification({captchaToken:e,setCaptchaToken:t}){let a=React.useRef(),l=e=>{t(e)},n=()=>{t(null)};return React.useEffect(()=>{hcaptcha&&null==e&&hcaptcha.render(a.current,{widgetID:"hCapWid1",sitekey:"7d9534dc-a9fb-406a-bd4b-196c7c892e9b",callback:l,"expired-callback":n,"open-callback":n})},[e]),React.createElement("ul",{className:"dataUl"},React.createElement("li",null,React.createElement("h3",null,"We love to serve Humans!"),null==e?React.createElement("span",null,"Verify that you aren't some AI algorithm trying out it's luck!"):React.createElement("span",null,"Verified! Kindly proceed")),React.createElement("li",null,React.createElement("div",{ref:a})))}function SuccessNotice(){let e=new Date;return React.createElement("ul",{className:"dataUl"},React.createElement("li",null,React.createElement("h3",null,"Collect your Lucky-Draw coupon!"),React.createElement("span",null,"Show this screen at the CSB outlet counter to collect your coupon!")),React.createElement("li",null,React.createElement("div",{className:"successTime"},React.createElement("i",{className:"successTick icon-check"}),React.createElement("div",null,e.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})),React.createElement("div",null,e.getDate()+" "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]+" "+e.getFullYear()))))}const ToastNotifierContext=React.createContext(()=>{});function ToastNotifier({children:e}){let[t,a]=React.useState(!1),[l,n]=React.useState(""),[r,c]=React.useState(""),s=null,i=()=>{s&&clearTimeout(s),n(""),c("")},u=()=>{a(!1),s&&clearTimeout(s),s=setTimeout(i,300)},o=(e,t)=>{e&&"string"==typeof e&&""!=e.trim()&&(t&&"string"==typeof t||(t=""),["err","ok","success","alert","warn"].includes(t)||(t=""),s&&clearTimeout(s),s=setTimeout(u,7e3),a(!0),n(e),c(t))};return React.createElement(React.Fragment,null,React.createElement(ToastNotifierContext.Provider,{value:o},e),React.createElement("div",{className:"tNotice"+("ok"==r||"success"==r?" tnOk":"err"==r?" tnErr":"warn"==r?" tnWarn":"alert"==r?" tnAlert":"")+(t?" tnViz":""),onClick:u},l))}function App(){let[e,t]=React.useState(!1),[a,l]=React.useState(1),[n,r]=React.useState(""),[c,s]=React.useState(""),[i,u]=React.useState(""),[o,m]=React.useState(""),[E,d]=React.useState(""),[p,h]=React.useState(""),[f,g]=React.useState(""),[N,v]=React.useState(""),[S,k]=React.useState(0),[y,C]=React.useState(""),[b,_]=React.useState(""),[$,w]=React.useState(0),[R,I]=React.useState(null),F=React.useContext(ToastNotifierContext),P=e=>e&&""!=e.trim()?e.length<3?"Minimum 3 letters":e.length>40?"Is too long":/[^a-zA-Z ]/.test(e)?"Only alphabets allowed":/^[a-zA-Z]+$/.test(e)?null:"Use only single word":"Required",A=e=>{var t=P(e);m(t||""),u(e)},T=e=>{var t=P(e);h(t||""),d(e)},x=e=>e&&""!=e.trim()?e.length>60?"Is too long":/^[\w.@]+@+[\w.]+$/.test(e)?null:"Enter valid email":"Email required",B=e=>{var t=x(e);s(t||""),r(e)},L=e=>e&&""!=e.trim()?/^[0-9]{10}$/.test(e)?10!==e.trim().length?"Should be 10 digits long":null:"Enter valid 10 digit number":"Phone required",D=e=>{var t=L(e);v(t||""),g(e)},U=e=>e.length>100?"Is too long":/[^a-zA-Z0-9,!. ]/.test(e)?"Invalid character":null,M=e=>{var t=U(e);_(t||""),C(e)},O=async()=>{if(a>=6)return!1;switch(a){case 1:let c=P(i),o=P(E);if(null!=c||null!=o)return c&&m(c),o&&h(o),F("Pleae provide required details","err"),!1;l(2);break;case 2:let p=x(n),N=L(f);if(null!=p||null!=N)return p&&s(p),N&&v(N),F("Pleae provide Email & Phone","err"),!1;l(3);break;case 3:if(S<1||S>4)return F("Pleae mention your locality","err"),!1;l(4);break;case 4:let b=U(y);if(null!=b)return _(b),!1;l(5);break;case 5:if(e)return!1;if(null==R)return F("Kindly solve captcha","err"),!1;let A={n:i,ln:E,eml:n,phn:f,loc:S,cptcha:R};""!==y&&(A.fb=y),$>0&&(A.r=$);try{t(!0);let T=await fetch("https://4fmyfzkngdvbf3hqnxf54fwyiq0adwlo.lambda-url.ap-south-1.on.aws/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(A)}),B=await T.json();if(!B.status)throw Error();if("error"===B.status)throw Error(B.error||"Failed to Enroll, Please retry");if("success"!==B.status)throw Error();l(6),F("Successfully enrolled!","success"),I(null),r(""),u(""),d(""),g(""),k(0),C(""),w(0)}catch(D){F(D.message||D.name||D.code||"Failed to Enroll, Please retry","err"),t(!1)}finally{t(!1)}}},q=()=>{a>1&&l(a-1)};return React.createElement(React.Fragment,null,a<6&&React.createElement(StepsProgressBar,{currentStep:a}),React.createElement("div",null,1==a&&React.createElement(Name,{name:i,setName:A,lastName:E,setLastName:T,nameErr:o,lastNameErr:p}),2==a&&React.createElement(ContactDetails,{name:i,email:n,setEmail:B,phn:f,setPhn:D,emailErr:c,phnErr:N}),3==a&&React.createElement(LocSelection,{locChoice:S,setLocChoice:k}),4==a&&React.createElement(Feedback,{name:i,feedback:y,setFeedback:M,feedbackErr:b,starRating:$,setStarRating:w}),5==a&&React.createElement(HumanVerification,{captchaToken:R,setCaptchaToken:I}),6==a&&React.createElement(SuccessNotice,null)),a<6&&React.createElement("footer",null,React.createElement("div",{className:"btnCntnr"},React.createElement("button",{className:"btn primary ico icoRight",onClick:O},React.createElement("i",{className:"icon-arrow-right"}),React.createElement("span",null,1==a?"ENROLL":5==a?"SUBMIT":"PROCEED")),a>1&&React.createElement("button",{className:"btn secondary ico",onClick:q},React.createElement("i",{className:"icon-arrow-left"})))),e&&React.createElement("div",{className:"appWip"}))}const root=ReactDOM.createRoot(document.getElementById("reactAppRoot"));root.render(React.createElement(ToastNotifier,null,React.createElement(App,null)));